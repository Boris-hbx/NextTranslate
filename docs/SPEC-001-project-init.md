# SPEC-001: NextTranslate é¡¹ç›®åˆå§‹åŒ–

> èµ·è‰æ—¥æœŸ: 2026-01-08
> çŠ¶æ€: å®æ–½ä¸­

## é¡¹ç›®æ¦‚è¿°

**NextTranslate** æ˜¯ä¸€ä¸ªä¸“æ³¨çš„æ–‡æ¡£ç¿»è¯‘æ¡Œé¢åº”ç”¨ï¼Œä» Work Engine çš„å·¥å…·ç®±ä¸­æŠ½å– PPT ç¿»è¯‘åŠŸèƒ½ï¼Œåšæˆç‹¬ç«‹çš„æœ¬åœ°å®‰è£… Windows åº”ç”¨ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- ä¸Šä¼  PDF æ–‡ä»¶ï¼ˆä» PPT å¯¼å‡ºï¼‰è¿›è¡Œç¿»è¯‘
- æˆªå›¾é€‰åŒº OCR è¯†åˆ« + AI ç¿»è¯‘
- æ”¯æŒ DeepSeek å’Œè±†åŒ…(ç«å±±å¼•æ“)æ¨¡å‹
- ç¿»è¯‘ç»“æœè¦†ç›–åœ¨åŸæ–‡æ¡£ä¸Š
- å¯¼å‡ºç¿»è¯‘åçš„ PDF

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| æ¡Œé¢æ¡†æ¶ | Tauri 2.0 (Rust) | è½»é‡çº§æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| åç«¯ | Flask (Python) | Web æœåŠ¡å’Œ API |
| å‰ç«¯ | HTML/CSS/JS + Jinja2 | ç•Œé¢æ¸²æŸ“ |
| æ‰“åŒ… | PyInstaller + Cargo | æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶ |
| æ•°æ®å­˜å‚¨ | JSON æ–‡ä»¶ | é…ç½®å’Œè®¾ç½® |
| ç«¯å£ | localhost:2008 | ä¸ Next(2026) åŒºåˆ† |

## é¡¹ç›®ç»“æ„

```
NextTranslate/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app.py                 # Flask ä¸»åº”ç”¨
â”œâ”€â”€ frontend/templates/
â”‚   â”œâ”€â”€ base.html              # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ translator.html        # ç¿»è¯‘ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ desktop/
â”‚   â”‚   â””â”€â”€ base.html          # æ¡Œé¢ç«¯å¸ƒå±€
â”‚   â””â”€â”€ shared/
â”‚       â””â”€â”€ base_core.html     # æ ¸å¿ƒæ¨¡æ¿
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ base.css           # åŸºç¡€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ style.css          # ä¸»æ ·å¼
â”‚   â”‚   â””â”€â”€ desktop.css        # æ¡Œé¢ç«¯æ ·å¼
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ translator.js      # ç¿»è¯‘å™¨é€»è¾‘(å¯é€‰æ‹†åˆ†)
â”‚   â””â”€â”€ icons/                 # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.json            # API é…ç½®
â”œâ”€â”€ data/
â”‚   â””â”€â”€ temp/                  # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”œâ”€â”€ src-tauri/                 # Tauri æ¡Œé¢åº”ç”¨
â”‚   â”œâ”€â”€ src/main.rs            # Rust ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ tauri.conf.json        # Tauri é…ç½®
â”‚   â”œâ”€â”€ resources/             # Flask exe å­˜æ”¾å¤„
â”‚   â””â”€â”€ icons/
â”œâ”€â”€ docs/                      # åŠŸèƒ½è§„æ ¼æ–‡æ¡£
â”‚   â””â”€â”€ SPEC-*.md
â”œâ”€â”€ build.bat                  # æ„å»ºè„šæœ¬
â”œâ”€â”€ start.bat                  # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ flask-backend.spec         # PyInstaller é…ç½®
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â”œâ”€â”€ CLAUDE.md                  # Claude Code æŒ‡å—
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## API è·¯ç”±è®¾è®¡

| è·¯ç”± | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/` | GET | é‡å®šå‘åˆ° /translator |
| `/translator` | GET | ç¿»è¯‘ä¸»é¡µé¢ |
| `/api/upload` | POST | ä¸Šä¼  PDF æ–‡ä»¶ |
| `/api/ocr` | POST | OCR è¯†åˆ«æˆªå›¾ |
| `/api/translate` | POST | ç¿»è¯‘æ–‡å­— |
| `/api/doubao-direct` | POST | è±†åŒ…ç›´æ¥ç¿»è¯‘å›¾ç‰‡ |
| `/api/export` | POST | å¯¼å‡ºç¿»è¯‘åçš„ PDF |
| `/api/settings` | GET/POST | è·å–/ä¿å­˜è®¾ç½® |
| `/api/test-api` | POST | æµ‹è¯• API Key |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |

## åŠŸèƒ½è¯¦ç»†è¯´æ˜

### 1. æ–‡ä»¶ä¸Šä¼ ä¸å±•ç¤º
- æ”¯æŒ PDF æ–‡ä»¶ä¸Šä¼ 
- å°† PDF è½¬æ¢ä¸ºå›¾ç‰‡è¿›è¡Œå±•ç¤º
- å·¦å³åˆ†æ ï¼šå·¦ä¾§åŸæ–‡ï¼Œå³ä¾§ç¿»è¯‘ç»“æœ

### 2. æˆªå›¾ç¿»è¯‘
- åœ¨åŸæ–‡åŒºåŸŸæ¡†é€‰éœ€è¦ç¿»è¯‘çš„åŒºåŸŸ
- è‡ªåŠ¨ OCR è¯†åˆ«æ–‡å­—
- ä¸€é”®ç¿»è¯‘å¹¶æ˜¾ç¤ºç»“æœ
- å¯ç¼–è¾‘ç¿»è¯‘ç»“æœ
- ä¿å­˜ç¿»è¯‘å—è¦†ç›–åˆ°å³ä¾§

### 3. ç¿»è¯‘æ¨¡å‹æ”¯æŒ
- **å…è´¹æ¨¡å¼**: OCR.space(å…è´¹) + DeepSeek
- **è±†åŒ…æ¨¡å¼**: è±†åŒ…è§†è§‰æ¨¡å‹(ä¸€æ­¥å®Œæˆ OCR+ç¿»è¯‘)

### 4. ç¿»è¯‘æ–¹å‘
- ä¸­æ–‡ â†’ è‹±æ–‡
- è‹±æ–‡ â†’ ä¸­æ–‡
- ä¸€é”®åˆ‡æ¢

### 5. è®¾ç½®ç®¡ç†
- DeepSeek API Key é…ç½®
- è±†åŒ… API Key + Endpoint ID é…ç½®
- API è¿é€šæ€§æµ‹è¯•

### 6. å¯¼å‡ºåŠŸèƒ½
- å°†ç¿»è¯‘ç»“æœå åŠ åˆ°åŸ PDF
- å¯¼å‡ºä¸ºæ–°çš„ PDF æ–‡ä»¶

## ç•Œé¢è®¾è®¡

### ä¸»ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ NextTranslate            [æˆªå›¾ç¿»è¯‘] [å¯¼å‡º] [âš™ï¸]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    åŸæ–‡ (å¾…ç¿»è¯‘)     â”‚  â”‚      ç¿»è¯‘ç»“æœ        â”‚      â”‚
â”‚  â”‚   ç¬¬ 1 / 10 é¡µ      â”‚  â”‚    ç¬¬ 1 / 10 é¡µ      â”‚      â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚   [PDF é¡µé¢å›¾ç‰‡]    â”‚  â”‚   [PDF + ç¿»è¯‘è¦†ç›–]  â”‚      â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚      â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚            [â—€ ä¸Šä¸€é¡µ]  1/10  [ä¸‹ä¸€é¡µ â–¶]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æˆªå›¾ç¿»è¯‘å¼¹çª—
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆªå›¾ç¿»è¯‘                                          [Ã—] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   è¯†åˆ«åŸæ–‡         â”‚    â”‚    ç¿»è¯‘ç»“æœ        â”‚        â”‚
â”‚  â”‚                   â”‚    â”‚                   â”‚        â”‚
â”‚  â”‚  [OCR è¯†åˆ«æ–‡å­—]    â”‚    â”‚  [ç¿»è¯‘åçš„æ–‡å­—]    â”‚        â”‚
â”‚  â”‚                   â”‚    â”‚                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                         â”‚
â”‚  ç¿»è¯‘æ–¹å‘: [è‹±æ–‡] â†’ [ä¸­æ–‡] [ğŸ”„]   æ¨¡å‹: [DeepSeek â–¼]   â”‚
â”‚                                                         â”‚
â”‚                      [ç¿»è¯‘]  [ä¿å­˜]  [å–æ¶ˆ]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¾èµ–é¡¹

### Python (requirements.txt)
```
flask>=2.0.0
Pillow>=9.0.0
pymupdf>=1.21.0
reportlab>=3.6.0
```

### Rust/Tauri
- tauri 2.0
- tauri-build

## æ•°æ®å­˜å‚¨

### é…ç½®æ–‡ä»¶ (config/config.json)
```json
{
  "deepseek_api_key": "",
  "doubao_api_key": "",
  "doubao_endpoint_id": ""
}
```

### ç”Ÿäº§ç¯å¢ƒæ•°æ®ä½ç½®
- Windows: `%LOCALAPPDATA%\NextTranslate\`

## æ„å»ºæµç¨‹

### å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨ Flask æœåŠ¡
cd backend && python app.py
# è®¿é—® http://localhost:2008
```

### ç”Ÿäº§æ„å»º
```bash
# 1. æ‰“åŒ… Flask
python -m PyInstaller flask-backend.spec --noconfirm

# 2. å¤åˆ¶åˆ° Tauri èµ„æºç›®å½•
copy dist\flask-backend.exe src-tauri\resources\

# 3. æ„å»º Tauri
cargo tauri build
```

### æ„å»ºäº§ç‰©
```
src-tauri/target/release/bundle/
â”œâ”€â”€ msi/NextTranslate_1.0.0_x64_en-US.msi
â””â”€â”€ nsis/NextTranslate_1.0.0_x64-setup.exe
```

## å®ç°æ­¥éª¤

### Phase 1: é¡¹ç›®åˆå§‹åŒ–
1. åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
2. ç¼–å†™ CLAUDE.md æŒ‡å—æ–‡ä»¶
3. åˆå§‹åŒ– requirements.txt
4. åˆ›å»ºåŸºç¡€ Flask åº”ç”¨

### Phase 2: åç«¯ API
1. å®ç°æ–‡ä»¶ä¸Šä¼  API
2. å®ç° OCR è¯†åˆ« API
3. å®ç°ç¿»è¯‘ API (DeepSeek + è±†åŒ…)
4. å®ç° PDF å¯¼å‡º API
5. å®ç°è®¾ç½®ç®¡ç† API

### Phase 3: å‰ç«¯ç•Œé¢
1. åˆ›å»ºåŸºç¡€æ¨¡æ¿ç»“æ„
2. å®ç°ç¿»è¯‘ä¸»ç•Œé¢
3. å®ç°æˆªå›¾é€‰åŒºåŠŸèƒ½
4. å®ç°ç¿»è¯‘å¼¹çª—
5. å®ç°è®¾ç½®é¡µé¢

### Phase 4: Tauri é›†æˆ
1. åˆå§‹åŒ– Tauri é¡¹ç›®
2. é…ç½®è¿›ç¨‹ç®¡ç†
3. æ‰“åŒ…æµ‹è¯•

### Phase 5: ä¼˜åŒ–ä¸æµ‹è¯•
1. UI ä¼˜åŒ–
2. é”™è¯¯å¤„ç†
3. æ€§èƒ½ä¼˜åŒ–
4. æ‰“åŒ…å‘å¸ƒ

## ä¸ Work Engine çš„å·®å¼‚

| ç‰¹æ€§ | Work Engine | NextTranslate |
|------|-------------|---------------|
| å®šä½ | ç»¼åˆå·¥ä½œå¹³å° | ä¸“æ³¨ç¿»è¯‘å·¥å…· |
| åŠŸèƒ½ | å¤šåŠŸèƒ½å·¥å…·ç®± | ä»…ç¿»è¯‘åŠŸèƒ½ |
| éƒ¨ç½² | Web æœåŠ¡ | æœ¬åœ°æ¡Œé¢åº”ç”¨ |
| ç«¯å£ | 2025 | 2008 |

## é¡¹ç›®æ‰€æœ‰è€…
Boris Huai
