# SPEC-002: UI 特性与视觉效果

> 起草日期: 2026-01-08
> 状态: 草稿

## 概述

NextTranslate 的 UI 风格与 Next 项目保持一致，包括：
- 左侧栏 + 小宠物
- 顶栏 + 彗星小球动画
- 底部 Living Line 呼吸动画
- 时区时钟显示
- 深色主题

## UI 组件规格

### 1. 顶栏 (Top Header)

**高度**: 48px

**布局**:
```
┌─────────────────────────────────────────────────────────┐
│ [☰] [⚡] NextTranslate              [file.pdf]  [👤 B] │
└─────────────────────────────────────────────────────────┘
```

**功能**:
- 左侧: 菜单按钮、闪电图标(点击设置小球参数)、应用名称
- 右侧: 当前文件名、头像(点击显示名言)
- 滚动时自动隐藏，向上滚动时显示

**小球动画**:
- 彗星小球在顶栏和侧边栏区域自由游动
- 鼠标接近时小球逃逸
- 小球被困边缘时颤抖，持续后爆炸分裂为3个碎片
- 碎片一段时间后重新汇合
- 支持自定义：数量、感应半径、排斥力度、最大速度、摩擦力、尾巴长度

### 2. 左侧栏 (Sidebar)

**宽度**: 220px (展开) / 0px (收起)

**布局**:
```
┌────────────────────┐
│  [导航链接]         │
│                    │
│                    │
│  ─────────────     │  ← 优雅分隔线
│  [时区时钟]         │
│   北京  12:30      │
│   滑铁卢 00:30     │
│   温哥华 21:30     │
└────────────────────┘
```

**功能**:
- 点击小宠物展开/收起侧边栏
- 收起时左侧显示发光提示条
- 时区时钟实时更新（北京、滑铁卢、温哥华）

### 3. 小宠物 (Pet)

**位置**: 侧边栏右边缘

**外观**:
- 三只眼睛的可爱生物
- 跟随鼠标上下移动
- 鼠标接近时加速跟随，远离时缓慢回到中间

**行为**:
- 点击切换侧边栏展开/收起
- 展开时紧贴侧边栏右边缘
- 收起时紧贴屏幕左边缘
- 经过导航链接区域时变扁

### 4. Living Line 呼吸动画

**位置**: 屏幕底部

**效果**:
- 动态波浪线条
- 响应鼠标移动
- 响应页面滚动
- 颜色渐变呼吸效果

### 5. 颜色主题

**深色主题 (默认)**:
```css
--bg-color: #0f0f1a;          /* 主背景 */
--bg-secondary: #1a1a2e;      /* 次级背景 */
--bg-tertiary: #252540;       /* 三级背景 */
--text-color: #ffffff;        /* 主文字 */
--text-secondary: rgba(255, 255, 255, 0.7);
--text-muted: rgba(255, 255, 255, 0.5);
--primary-color: #4f46e5;     /* 主色调 */
--accent-color: #10b981;      /* 强调色 */
```

**渐变效果**:
- 应用标题: `linear-gradient(135deg, #4f46e5, #10b981)`
- 激活状态: `linear-gradient(135deg, #ff6b6b, #feca57)`

### 6. 时区时钟

**显示格式**: `M/D 周X HH:MM`

**时区列表**:
| 城市 | 时区 |
|------|------|
| 北京 | Asia/Shanghai |
| 滑铁卢 | America/Toronto |
| 温哥华 | America/Vancouver |

**更新频率**: 每秒更新

### 7. Toast 通知

**位置**: 鼠标附近，智能避免边界

**类型**:
- success: 绿色
- error: 红色
- warning: 橙色
- info: 蓝色

**动画**: 淡入淡出，2秒后自动消失

## 交互规范

### 动画曲线
- 默认: `ease` 或 `ease-out`
- 弹性: `cubic-bezier(0.34, 1.56, 0.64, 1)`
- 平滑: `cubic-bezier(0.25, 0.46, 0.45, 0.94)`

### 过渡时间
- 快速: 0.2s
- 标准: 0.3s
- 慢速: 0.4s

### 悬停效果
- 背景变亮: `rgba(255, 255, 255, 0.1)`
- 轻微放大: `scale(1.02)`
- 阴影增强

## 响应式设计

### 断点
- 桌面: >= 1024px
- 平板: 768px - 1023px
- 移动: < 768px

### 小屏幕适配
- 支持 1366x768 笔记本
- 侧边栏可收起
- 工具栏自适应

## 实现优先级

### Phase 1: 基础框架
1. 顶栏基础布局
2. 侧边栏基础布局
3. 深色主题样式
4. Toast 通知

### Phase 2: 核心动画
1. 小宠物跟随动画
2. 侧边栏展开/收起
3. 顶栏滚动隐藏

### Phase 3: 高级效果
1. 彗星小球动画（从 Next 复制）
2. Living Line 呼吸动画
3. 时区时钟

### Phase 4: 细节打磨
1. 头像名言功能
2. 小球设置面板
3. 过渡动画优化

## 文件来源

从 Next 项目复制的文件：
- `assets/css/base.css` - 基础样式
- `assets/css/desktop.css` - 桌面端样式
- `assets/js/living-line.js` - 呼吸线动画
- `frontend/templates/desktop/base.html` - 桌面端模板（包含小球动画代码）

## 注意事项

1. 小球动画代码较长（约1500行），建议保持内联在模板中
2. Living Line 动画使用 Canvas 绑定
3. 所有动画使用 requestAnimationFrame
4. 注意性能：限制粒子数量，使用 passive 事件监听

## 项目所有者
Boris Huai
